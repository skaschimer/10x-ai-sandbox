import{s as Qt,p as Ft,X as te,Q as ce,A as Pt,o as ue,f as p,l as X,a as B,g,h as w,m as G,d as o,c as H,S as Dt,j as n,i as j,w as a,R as jt,y as dt,P as Se,n as ot,z as ee,N as Pe,r as fe,L as Ne,e as ge,u as Ht,v as Ct}from"../chunks/scheduler.2ec89978.js";import{S as le,i as se,f as ae,b as Et,d as Tt,m as It,a as rt,t as vt,e as Vt,g as Yt,c as Zt}from"../chunks/index.276f3600.js";import{g as je}from"../chunks/globals.7f7f1b26.js";import{e as Kt}from"../chunks/each.de3f9353.js";import{a as xt}from"../chunks/Toaster.svelte_svelte_type_style_lang.a694d3ca.js";import{f as Fe}from"../chunks/FileSaver.min.898eb36f.js";import{q as bt,S as Be,x as He,W as qe,k as Re}from"../chunks/index.3b6ce8f7.js";import{u as Qe,g as Lt,t as _e,c as ie,d as we}from"../chunks/index.07100e8d.js";import{i as Ce}from"../chunks/index.b46c02f3.js";import{t as Ue}from"../chunks/index.1d78794b.js";import{C as $e}from"../chunks/Checkbox.e0f2f26f.js";import{M as Oe}from"../chunks/dayjs.min.75d9117a.js";import{T as Ae}from"../chunks/Tags.3fb0e96c.js";import"../chunks/sha256.65a6c54a.js";import{A as Xe}from"../chunks/AddFilesPlaceholder.cd6db517.js";function Ge(e){let t,l,s,f=e[3].t("Edit Doc")+"",c,r,u,d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,i,m,b,k,x,S,N=e[3].t("Name Tag")+"",D,F,y,M,z="#",ht,P,$,it,tt,q=e[3].t("Title")+"",ct,nt,O,W,ut,ft,et,U=e[3].t("Tags")+"",A,R,h,E,T,L,C=e[3].t("Save")+"",Y,Q,pt,Z;return h=new Ae({props:{tags:e[1],addTag:e[6],deleteTag:e[7]}}),{c(){t=p("div"),l=p("div"),s=p("div"),c=X(f),r=B(),u=p("button"),u.innerHTML=d,_=B(),i=p("div"),m=p("div"),b=p("form"),k=p("div"),x=p("div"),S=p("div"),D=X(N),F=B(),y=p("div"),M=p("div"),M.textContent=z,ht=B(),P=p("input"),$=B(),it=p("div"),tt=p("div"),ct=X(q),nt=B(),O=p("div"),W=p("input"),ut=B(),ft=p("div"),et=p("div"),A=X(U),R=B(),Et(h.$$.fragment),E=B(),T=p("div"),L=p("button"),Y=X(C),this.h()},l(I){t=g(I,"DIV",{});var J=w(t);l=g(J,"DIV",{class:!0});var K=w(l);s=g(K,"DIV",{class:!0});var Mt=w(s);c=G(Mt,f),Mt.forEach(o),r=H(K),u=g(K,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt(u)!=="svelte-745w2y"&&(u.innerHTML=d),K.forEach(o),_=H(J),i=g(J,"DIV",{class:!0});var St=w(i);m=g(St,"DIV",{class:!0});var Ut=w(m);b=g(Ut,"FORM",{class:!0});var Nt=w(b);k=g(Nt,"DIV",{class:!0});var _t=w(k);x=g(_t,"DIV",{class:!0});var $t=w(x);S=g($t,"DIV",{class:!0});var wt=w(S);D=G(wt,N),wt.forEach(o),F=H($t),y=g($t,"DIV",{class:!0});var Bt=w(y);M=g(Bt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(M)!=="svelte-113b805"&&(M.textContent=z),ht=H(Bt),P=g(Bt,"INPUT",{class:!0,type:!0,autocomplete:!0}),Bt.forEach(o),$t.forEach(o),$=H(_t),it=g(_t,"DIV",{class:!0});var Ot=w(it);tt=g(Ot,"DIV",{class:!0});var st=w(tt);ct=G(st,q),st.forEach(o),nt=H(Ot),O=g(Ot,"DIV",{class:!0});var gt=w(O);W=g(gt,"INPUT",{class:!0,type:!0,autocomplete:!0}),gt.forEach(o),Ot.forEach(o),ut=H(_t),ft=g(_t,"DIV",{class:!0});var At=w(ft);et=g(At,"DIV",{class:!0});var qt=w(et);A=G(qt,U),qt.forEach(o),R=H(At),Tt(h.$$.fragment,At),At.forEach(o),_t.forEach(o),E=H(Nt),T=g(Nt,"DIV",{class:!0});var at=w(T);L=g(at,"BUTTON",{class:!0,type:!0});var kt=w(L);Y=G(kt,C),kt.forEach(o),at.forEach(o),Nt.forEach(o),Ut.forEach(o),St.forEach(o),J.forEach(o),this.h()},h(){n(s,"class","text-lg font-medium self-center"),n(u,"class","self-center"),n(l,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),n(S,"class","mb-1 text-xs text-gray-500"),n(M,"class","bg-gray-200 dark:bg-gray-800 font-bold px-3 py-0.5 border border-r-0 dark:border-gray-800 rounded-l-xl flex items-center"),n(P,"class","w-full rounded-r-xl py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 disabled:text-gray-500 dark:disabled:text-gray-500 outline-none svelte-1vx7r9s"),n(P,"type","text"),n(P,"autocomplete","off"),P.required=!0,n(y,"class","flex flex-1"),n(x,"class","flex flex-col w-full"),n(tt,"class","mb-1 text-xs text-gray-500"),n(W,"class","w-full rounded-xl py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none svelte-1vx7r9s"),n(W,"type","text"),n(W,"autocomplete","off"),W.required=!0,n(O,"class","flex-1"),n(it,"class","flex flex-col w-full"),n(et,"class","mb-2 text-xs text-gray-500"),n(ft,"class","flex flex-col w-full"),n(k,"class","flex flex-col space-y-1.5"),n(L,"class","px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg"),n(L,"type","submit"),n(T,"class","flex justify-end pt-5 text-sm font-medium"),n(b,"class","flex flex-col w-full"),n(m,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),n(i,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(I,J){j(I,t,J),a(t,l),a(l,s),a(s,c),a(l,r),a(l,u),a(t,_),a(t,i),a(i,m),a(m,b),a(b,k),a(k,x),a(x,S),a(S,D),a(x,F),a(x,y),a(y,M),a(y,ht),a(y,P),jt(P,e[2].name),a(k,$),a(k,it),a(it,tt),a(tt,ct),a(it,nt),a(it,O),a(O,W),jt(W,e[2].title),a(k,ut),a(k,ft),a(ft,et),a(et,A),a(ft,R),It(h,ft,null),a(b,E),a(b,T),a(T,L),a(L,Y),Q=!0,pt||(Z=[dt(u,"click",e[9]),dt(P,"input",e[10]),dt(W,"input",e[11]),dt(b,"submit",Se(e[12]))],pt=!0)},p(I,J){(!Q||J&8)&&f!==(f=I[3].t("Edit Doc")+"")&&ot(c,f),(!Q||J&8)&&N!==(N=I[3].t("Name Tag")+"")&&ot(D,N),J&4&&P.value!==I[2].name&&jt(P,I[2].name),(!Q||J&8)&&q!==(q=I[3].t("Title")+"")&&ot(ct,q),J&4&&W.value!==I[2].title&&jt(W,I[2].title),(!Q||J&8)&&U!==(U=I[3].t("Tags")+"")&&ot(A,U);const K={};J&2&&(K.tags=I[1]),h.$set(K),(!Q||J&8)&&C!==(C=I[3].t("Save")+"")&&ot(Y,C)},i(I){Q||(rt(h.$$.fragment,I),Q=!0)},o(I){vt(h.$$.fragment,I),Q=!1},d(I){I&&o(t),Vt(h),pt=!1,ee(Z)}}}function Je(e){let t,l,s;function f(r){e[13](r)}let c={size:"sm",$$slots:{default:[Ge]},$$scope:{ctx:e}};return e[0]!==void 0&&(c.show=e[0]),t=new Oe({props:c}),Ft.push(()=>ae(t,"show",f)),{c(){Et(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,u){It(t,r,u),s=!0},p(r,[u]){const d={};u&16399&&(d.$$scope={dirty:u,ctx:r}),!l&&u&1&&(l=!0,d.show=r[0],te(()=>l=!1)),t.$set(d)},i(r){s||(rt(t.$$.fragment,r),s=!0)},o(r){vt(t.$$.fragment,r),s=!1},d(r){Vt(t,r)}}}function We(e,t,l){let s;const f=ce("i18n");Pt(e,f,D=>l(3,s=D));let{show:c=!1}=t,{selectedDoc:r}=t,u=[],d={name:"",title:"",content:null};const _=async()=>{await Qe(localStorage.token,r.name,{title:d.title,name:d.name}).catch(F=>{xt.error(F)})&&(l(0,c=!1),bt.set(await Lt(localStorage.token)))},i=async D=>{!u.find(F=>F.name===D)&&D!==""?(l(1,u=[...u,{name:D}]),await _e(localStorage.token,d.name,{name:d.name,tags:u}),bt.set(await Lt(localStorage.token))):console.log("tag already exists")},m=async D=>{l(1,u=u.filter(F=>F.name!==D)),await _e(localStorage.token,d.name,{name:d.name,tags:u}),bt.set(await Lt(localStorage.token))};ue(()=>{var D;r&&(l(2,d=JSON.parse(JSON.stringify(r))),l(1,u=((D=d==null?void 0:d.content)==null?void 0:D.tags)??[]))});const b=()=>{l(0,c=!1)};function k(){d.name=this.value,l(2,d)}function x(){d.title=this.value,l(2,d)}const S=()=>{_()};function N(D){c=D,l(0,c)}return e.$$set=D=>{"show"in D&&l(0,c=D.show),"selectedDoc"in D&&l(8,r=D.selectedDoc)},[c,u,d,s,f,_,i,m,r,b,k,x,S,N]}class Ye extends le{constructor(t){super(),se(this,t,We,Je,Qt,{show:0,selectedDoc:8})}}function Ze(e){let t=e[4].t("Click here to select documents.")+"",l;return{c(){l=X(t)},l(s){l=G(s,t)},m(s,f){j(s,l,f)},p(s,f){f&16&&t!==(t=s[4].t("Click here to select documents.")+"")&&ot(l,t)},d(s){s&&o(l)}}}function Ke(e){let t=e[2].length>0?`${e[2].length}`:"",l,s;return{c(){l=X(t),s=X(" document(s) selected.")},l(f){l=G(f,t),s=G(f," document(s) selected.")},m(f,c){j(f,l,c),j(f,s,c)},p(f,c){c&4&&t!==(t=f[2].length>0?`${f[2].length}`:"")&&ot(l,t)},d(f){f&&(o(l),o(s))}}}function tl(e){let t,l,s,f=e[4].t("Add Docs")+"",c,r,u,d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,i,m,b,k,x,S,N,D,F,y,M,z=e[4].t("Tags")+"",ht,P,$,it,tt,q,ct=e[4].t("Save")+"",nt,O,W,ut;function ft(A,R){return A[2]?Ke:Ze}let et=ft(e),U=et(e);return $=new Ae({props:{tags:e[3],addTag:e[7],deleteTag:e[8]}}),{c(){t=p("div"),l=p("div"),s=p("div"),c=X(f),r=B(),u=p("button"),u.innerHTML=d,_=B(),i=p("div"),m=p("div"),b=p("form"),k=p("div"),x=p("input"),S=B(),N=p("button"),U.c(),D=B(),F=p("div"),y=p("div"),M=p("div"),ht=X(z),P=B(),Et($.$$.fragment),it=B(),tt=p("div"),q=p("button"),nt=X(ct),this.h()},l(A){t=g(A,"DIV",{});var R=w(t);l=g(R,"DIV",{class:!0});var h=w(l);s=g(h,"DIV",{class:!0});var E=w(s);c=G(E,f),E.forEach(o),r=H(h),u=g(h,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt(u)!=="svelte-745w2y"&&(u.innerHTML=d),h.forEach(o),_=H(R),i=g(R,"DIV",{class:!0});var T=w(i);m=g(T,"DIV",{class:!0});var L=w(m);b=g(L,"FORM",{class:!0});var C=w(b);k=g(C,"DIV",{class:!0});var Y=w(k);x=g(Y,"INPUT",{id:!0,type:!0,class:!0}),S=H(Y),N=g(Y,"BUTTON",{class:!0,type:!0});var Q=w(N);U.l(Q),Q.forEach(o),Y.forEach(o),D=H(C),F=g(C,"DIV",{class:!0});var pt=w(F);y=g(pt,"DIV",{class:!0});var Z=w(y);M=g(Z,"DIV",{class:!0});var I=w(M);ht=G(I,z),I.forEach(o),P=H(Z),Tt($.$$.fragment,Z),Z.forEach(o),pt.forEach(o),it=H(C),tt=g(C,"DIV",{class:!0});var J=w(tt);q=g(J,"BUTTON",{class:!0,type:!0});var K=w(q);nt=G(K,ct),K.forEach(o),J.forEach(o),C.forEach(o),L.forEach(o),T.forEach(o),R.forEach(o),this.h()},h(){n(s,"class","text-lg font-medium self-center"),n(u,"class","self-center"),n(l,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),n(x,"id","upload-doc-input"),x.hidden=!0,n(x,"type","file"),x.multiple=!0,n(x,"class","svelte-1vx7r9s"),n(N,"class","w-full text-sm font-medium py-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-850 dark:hover:bg-gray-800 text-center rounded-xl"),n(N,"type","button"),n(k,"class","mb-3 w-full"),n(M,"class","mb-1.5 text-xs text-gray-500"),n(y,"class","flex flex-col w-full"),n(F,"class","flex flex-col space-y-1.5"),n(q,"class","px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg"),n(q,"type","submit"),n(tt,"class","flex justify-end pt-5 text-sm font-medium"),n(b,"class","flex flex-col w-full"),n(m,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),n(i,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(A,R){j(A,t,R),a(t,l),a(l,s),a(s,c),a(l,r),a(l,u),a(t,_),a(t,i),a(i,m),a(m,b),a(b,k),a(k,x),e[10](x),a(k,S),a(k,N),U.m(N,null),a(b,D),a(b,F),a(F,y),a(y,M),a(M,ht),a(y,P),It($,y,null),a(b,it),a(b,tt),a(tt,q),a(q,nt),O=!0,W||(ut=[dt(u,"click",e[9]),dt(x,"change",e[11]),dt(N,"click",e[12]),dt(b,"submit",Se(e[13]))],W=!0)},p(A,R){(!O||R&16)&&f!==(f=A[4].t("Add Docs")+"")&&ot(c,f),et===(et=ft(A))&&U?U.p(A,R):(U.d(1),U=et(A),U&&(U.c(),U.m(N,null))),(!O||R&16)&&z!==(z=A[4].t("Tags")+"")&&ot(ht,z);const h={};R&8&&(h.tags=A[3]),$.$set(h),(!O||R&16)&&ct!==(ct=A[4].t("Save")+"")&&ot(nt,ct)},i(A){O||(rt($.$$.fragment,A),O=!0)},o(A){vt($.$$.fragment,A),O=!1},d(A){A&&o(t),e[10](null),U.d(),Vt($),W=!1,ee(ut)}}}function el(e){let t,l,s;function f(r){e[14](r)}let c={size:"sm",$$slots:{default:[tl]},$$scope:{ctx:e}};return e[0]!==void 0&&(c.show=e[0]),t=new Oe({props:c}),Ft.push(()=>ae(t,"show",f)),{c(){Et(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,u){It(t,r,u),s=!0},p(r,[u]){const d={};u&131103&&(d.$$scope={dirty:u,ctx:r}),!l&&u&1&&(l=!0,d.show=r[0],te(()=>l=!1)),t.$set(d)},i(r){s||(rt(t.$$.fragment,r),s=!0)},o(r){vt(t.$$.fragment,r),s=!1},d(r){Vt(t,r)}}}function ll(e,t,l){let s;const f=ce("i18n");Pt(e,f,y=>l(4,s=y));let{show:c=!1}=t,r,u,d=[];const _=async y=>{const M=await Ce(localStorage.token,"",y).catch(z=>(xt.error(z),null));M&&(await ie(localStorage.token,M.collection_name,M.filename,Ue(M.filename),M.filename,d.length>0?{tags:d}:null).catch(z=>(xt.error(z),null)),await bt.set(await Lt(localStorage.token)))},i=async()=>{if(u&&u.length>0){for(const y of u)console.log(y,y.name.split(".").at(-1)),Be.includes(y.type)||He.includes(y.name.split(".").at(-1))||xt.error(`Unknown File Type '${y.type}', but accepting and treating as plain text`),_(y);l(2,u=null),l(1,r.value="",r)}else xt.error(s.t("File not found."));l(0,c=!1),bt.set(await Lt(localStorage.token))},m=async y=>{!d.find(M=>M.name===y)&&y!==""?l(3,d=[...d,{name:y}]):console.log("tag already exists")},b=async y=>{l(3,d=d.filter(M=>M.name!==y))};ue(()=>{});const k=()=>{l(0,c=!1)};function x(y){Ft[y?"unshift":"push"](()=>{r=y,l(1,r)})}function S(){u=this.files,l(2,u)}const N=()=>{r.click()},D=()=>{i()};function F(y){c=y,l(0,c)}return e.$$set=y=>{"show"in y&&l(0,c=y.show)},[c,r,u,d,s,f,i,m,b,k,x,S,N,D,F]}class sl extends le{constructor(t){super(),se(this,t,ll,el,Qt,{show:0})}}const{document:oe}=je;function be(e,t,l){const s=e.slice();return s[35]=t[l],s[36]=t,s[37]=l,s}function ke(e,t,l){const s=e.slice();return s[38]=t[l],s}function ye(e){let t,l,s,f,c,r,u;return c=new Xe({props:{$$slots:{default:[al]},$$scope:{ctx:e}}}),{c(){t=p("div"),l=p("div"),s=p("div"),f=p("div"),Et(c.$$.fragment),this.h()},l(d){t=g(d,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var _=w(t);l=g(_,"DIV",{class:!0});var i=w(l);s=g(i,"DIV",{class:!0});var m=w(s);f=g(m,"DIV",{class:!0});var b=w(f);Tt(c.$$.fragment,b),b.forEach(o),m.forEach(o),i.forEach(o),_.forEach(o),this.h()},h(){n(f,"class","max-w-md"),n(s,"class","m-auto pt-64 flex flex-col justify-center"),n(l,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),n(t,"class",r="fixed "+(e[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),n(t,"id","dropzone"),n(t,"role","region"),n(t,"aria-label","Drag and Drop Container")},m(d,_){j(d,t,_),a(t,l),a(l,s),a(s,f),It(c,f,null),u=!0},p(d,_){const i={};_[1]&1024&&(i.$$scope={dirty:_,ctx:d}),c.$set(i),(!u||_[0]&8192&&r!==(r="fixed "+(d[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&n(t,"class",r)},i(d){u||(rt(c.$$.fragment,d),u=!0)},o(d){vt(c.$$.fragment,d),u=!1},d(d){d&&o(t),Vt(c)}}}function al(e){let t,l="Drop any files here to add to my documents";return{c(){t=p("div"),t.textContent=l,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Dt(t)!=="svelte-19eg75t"&&(t.textContent=l),this.h()},h(){n(t,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(s,f){j(s,t,f)},p:fe,d(s){s&&o(t)}}}function xe(e){let t,l,s;function f(r){e[18](r)}let c={selectedDoc:e[8]};return e[7]!==void 0&&(c.show=e[7]),t=new Ye({props:c}),Ft.push(()=>ae(t,"show",f)),{c(){Et(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,u){It(t,r,u),s=!0},p(r,u){const d={};u[0]&256&&(d.selectedDoc=r[8]),!l&&u[0]&128&&(l=!0,d.show=r[7],te(()=>l=!1)),t.$set(d)},i(r){s||(rt(t.$$.fragment,r),s=!0)},o(r){vt(t.$$.fragment,r),s=!1},d(r){Vt(t,r)}}}function De(e){let t,l,s,f,c,r;s=new $e({props:{state:e[10].filter(Ie).length===e[10].length?"checked":"unchecked",indeterminate:e[10].filter(Ve).length>0&&e[10].filter(Me).length!==e[10].length}}),s.$on("change",e[22]);function u(i,m){return m[0]&1024&&(c=null),c==null&&(c=i[10].filter(ul).length===0),c?rl:nl}let d=u(e,[-1,-1]),_=d(e);return{c(){t=p("div"),l=p("div"),Et(s.$$.fragment),f=B(),_.c(),this.h()},l(i){t=g(i,"DIV",{class:!0});var m=w(t);l=g(m,"DIV",{class:!0});var b=w(l);Tt(s.$$.fragment,b),b.forEach(o),f=H(m),_.l(m),m.forEach(o),this.h()},h(){n(l,"class","ml-0.5 pr-3 my-auto flex items-center"),n(t,"class","px-2.5 pt-1 flex gap-1 flex-wrap")},m(i,m){j(i,t,m),a(t,l),It(s,l,null),a(t,f),_.m(t,null),r=!0},p(i,m){const b={};m[0]&1024&&(b.state=i[10].filter(Ie).length===i[10].length?"checked":"unchecked"),m[0]&1024&&(b.indeterminate=i[10].filter(Ve).length>0&&i[10].filter(Me).length!==i[10].length),s.$set(b),d===(d=u(i,m))&&_?_.p(i,m):(_.d(1),_=d(i),_&&(_.c(),_.m(t,null)))},i(i){r||(rt(s.$$.fragment,i),r=!0)},o(i){vt(s.$$.fragment,i),r=!1},d(i){i&&o(t),Vt(s),_.d()}}}function nl(e){let t,l,s=e[10].filter(Le).length+"",f,c,r,u,d,_,i=e[11].t("delete")+"",m,b,k;return{c(){t=p("div"),l=p("div"),f=X(s),c=X(" Selected"),r=B(),u=p("div"),d=p("button"),_=p("div"),m=X(i),this.h()},l(x){t=g(x,"DIV",{class:!0});var S=w(t);l=g(S,"DIV",{class:!0});var N=w(l);f=G(N,s),c=G(N," Selected"),N.forEach(o),r=H(S),u=g(S,"DIV",{class:!0});var D=w(u);d=g(D,"BUTTON",{class:!0});var F=w(d);_=g(F,"DIV",{class:!0});var y=w(_);m=G(y,i),y.forEach(o),F.forEach(o),D.forEach(o),S.forEach(o),this.h()},h(){n(l,"class","text-xs font-medium py-0.5 self-center mr-1"),n(_,"class","text-xs font-medium self-center line-clamp-1"),n(d,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white"),n(u,"class","flex gap-1"),n(t,"class","flex-1 flex w-full justify-between items-center")},m(x,S){j(x,t,S),a(t,l),a(l,f),a(l,c),a(t,r),a(t,u),a(u,d),a(d,_),a(_,m),b||(k=dt(d,"click",e[25]),b=!0)},p(x,S){S[0]&1024&&s!==(s=x[10].filter(Le).length+"")&&ot(f,s),S[0]&2048&&i!==(i=x[11].t("delete")+"")&&ot(m,i)},d(x){x&&o(t),b=!1,k()}}}function rl(e){let t,l,s=e[11].t("all")+"",f,c,r,u,d,_=Kt(e[5]),i=[];for(let m=0;m<_.length;m+=1)i[m]=Ee(ke(e,_,m));return{c(){t=p("button"),l=p("div"),f=X(s),c=B();for(let m=0;m<i.length;m+=1)i[m].c();r=ge(),this.h()},l(m){t=g(m,"BUTTON",{class:!0});var b=w(t);l=g(b,"DIV",{class:!0});var k=w(l);f=G(k,s),k.forEach(o),b.forEach(o),c=H(m);for(let x=0;x<i.length;x+=1)i[x].l(m);r=ge(),this.h()},h(){n(l,"class","text-xs font-medium self-center line-clamp-1"),n(t,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white")},m(m,b){j(m,t,b),a(t,l),a(l,f),j(m,c,b);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(m,b);j(m,r,b),u||(d=dt(t,"click",e[23]),u=!0)},p(m,b){if(b[0]&2048&&s!==(s=m[11].t("all")+"")&&ot(f,s),b[0]&34){_=Kt(m[5]);let k;for(k=0;k<_.length;k+=1){const x=ke(m,_,k);i[k]?i[k].p(x,b):(i[k]=Ee(x),i[k].c(),i[k].m(r.parentNode,r))}for(;k<i.length;k+=1)i[k].d(1);i.length=_.length}},d(m){m&&(o(t),o(c),o(r)),Ne(i,m),u=!1,d()}}}function Ee(e){let t,l,s,f=e[38]+"",c,r,u,d;function _(){return e[24](e[38])}return{c(){t=p("button"),l=p("div"),s=X("#"),c=X(f),r=B(),this.h()},l(i){t=g(i,"BUTTON",{class:!0});var m=w(t);l=g(m,"DIV",{class:!0});var b=w(l);s=G(b,"#"),c=G(b,f),b.forEach(o),r=H(m),m.forEach(o),this.h()},h(){n(l,"class","text-xs font-medium self-center line-clamp-1"),n(t,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white")},m(i,m){j(i,t,m),a(t,l),a(l,s),a(l,c),a(t,r),u||(d=dt(t,"click",_),u=!0)},p(i,m){e=i,m[0]&32&&f!==(f=e[38]+"")&&ot(c,f)},d(i){i&&o(t),u=!1,d()}}}function ol(e){let t,l,s,f,c,r;return{c(){t=Ht("svg"),l=Ht("style"),s=X(`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),f=Ht("circle"),c=Ht("circle"),r=Ht("circle"),this.h()},l(u){t=Ct(u,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var d=w(t);l=Ct(d,"style",{});var _=w(l);s=G(_,`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),_.forEach(o),f=Ct(d,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(f).forEach(o),c=Ct(d,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(c).forEach(o),r=Ct(d,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(r).forEach(o),d.forEach(o),this.h()},h(){n(f,"class","spinner_qM83"),n(f,"cx","4"),n(f,"cy","12"),n(f,"r","2.5"),n(c,"class","spinner_qM83 spinner_oXPr"),n(c,"cx","12"),n(c,"cy","12"),n(c,"r","2.5"),n(r,"class","spinner_qM83 spinner_ZTLf"),n(r,"cx","20"),n(r,"cy","12"),n(r,"r","2.5"),n(t,"class","w-6 h-6 translate-y-[0.5px]"),n(t,"fill","currentColor"),n(t,"viewBox","0 0 24 24"),n(t,"xmlns","http://www.w3.org/2000/svg")},m(u,d){j(u,t,d),a(t,l),a(l,s),a(t,f),a(t,c),a(t,r)},d(u){u&&o(t)}}}function il(e){let t,l,s;return{c(){t=Ht("svg"),l=Ht("path"),s=Ht("path"),this.h()},l(f){t=Ct(f,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var c=w(t);l=Ct(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(l).forEach(o),s=Ct(c,"path",{d:!0}),w(s).forEach(o),c.forEach(o),this.h()},h(){n(l,"fill-rule","evenodd"),n(l,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),n(l,"clip-rule","evenodd"),n(s,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),n(t,"xmlns","http://www.w3.org/2000/svg"),n(t,"viewBox","0 0 24 24"),n(t,"fill","currentColor"),n(t,"class","w-6 h-6")},m(f,c){j(f,t,c),a(t,l),a(t,s)},d(f){f&&o(t)}}}function Te(e){var E;let t,l,s,f,c,r,u,d,_,i,m,b=e[35].name+"",k,x,S=e[35].filename+"",N,D,F,y,M=e[35].title+"",z,ht,P,$,it='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg>',tt,q,ct='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg>',nt,O,W,ut;s=new $e({props:{state:((E=e[35])==null?void 0:E.selected)??"unchecked"}});function ft(T,L){return T[35]?il:ol}let et=ft(e),U=et(e);function A(...T){return e[26](e[35],...T)}function R(...T){return e[27](e[35],...T)}function h(){return e[28](e[35],e[36],e[37])}return{c(){t=p("button"),l=p("div"),Et(s.$$.fragment),f=B(),c=p("div"),r=p("div"),u=p("div"),U.c(),d=B(),_=p("div"),i=p("div"),m=X("#"),k=X(b),x=X(" ("),N=X(S),D=X(")"),F=B(),y=p("div"),z=X(M),ht=B(),P=p("div"),$=p("button"),$.innerHTML=it,tt=B(),q=p("button"),q.innerHTML=ct,nt=B(),this.h()},l(T){t=g(T,"BUTTON",{class:!0});var L=w(t);l=g(L,"DIV",{class:!0});var C=w(l);Tt(s.$$.fragment,C),C.forEach(o),f=H(L),c=g(L,"DIV",{class:!0});var Y=w(c);r=g(Y,"DIV",{class:!0});var Q=w(r);u=g(Q,"DIV",{class:!0});var pt=w(u);U.l(pt),pt.forEach(o),d=H(Q),_=g(Q,"DIV",{class:!0});var Z=w(_);i=g(Z,"DIV",{class:!0});var I=w(i);m=G(I,"#"),k=G(I,b),x=G(I," ("),N=G(I,S),D=G(I,")"),I.forEach(o),F=H(Z),y=g(Z,"DIV",{class:!0});var J=w(y);z=G(J,M),J.forEach(o),Z.forEach(o),Q.forEach(o),Y.forEach(o),ht=H(L),P=g(L,"DIV",{class:!0});var K=w(P);$=g(K,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Dt($)!=="svelte-105zedk"&&($.innerHTML=it),tt=H(K),q=g(K,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Dt(q)!=="svelte-13wl5iz"&&(q.innerHTML=ct),K.forEach(o),nt=H(L),L.forEach(o),this.h()},h(){n(l,"class","my-auto flex items-center"),n(u,"class","p-2.5 bg-red-400 text-white rounded-lg"),n(i,"class","font-bold line-clamp-1"),n(y,"class","text-xs overflow-hidden text-ellipsis line-clamp-1"),n(_,"class","self-center flex-1"),n(r,"class","flex items-center space-x-3"),n(c,"class","flex flex-1 space-x-4 cursor-pointer w-full"),n($,"class","self-center w-fit text-sm z-20 px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),n($,"type","button"),n(q,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),n(q,"type","button"),n(P,"class","flex flex-row space-x-1 self-center"),n(t,"class","flex space-x-4 cursor-pointer text-left w-full px-3 py-2 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl")},m(T,L){j(T,t,L),a(t,l),It(s,l,null),a(t,f),a(t,c),a(c,r),a(r,u),U.m(u,null),a(r,d),a(r,_),a(_,i),a(i,m),a(i,k),a(i,x),a(i,N),a(i,D),a(_,F),a(_,y),a(y,z),a(t,ht),a(t,P),a(P,$),a(P,tt),a(P,q),a(t,nt),O=!0,W||(ut=[dt($,"click",A),dt(q,"click",R),dt(t,"click",h)],W=!0)},p(T,L){var Y;e=T;const C={};L[0]&1024&&(C.state=((Y=e[35])==null?void 0:Y.selected)??"unchecked"),s.$set(C),et!==(et=ft(e))&&(U.d(1),U=et(e),U&&(U.c(),U.m(u,null))),(!O||L[0]&1024)&&b!==(b=e[35].name+"")&&ot(k,b),(!O||L[0]&1024)&&S!==(S=e[35].filename+"")&&ot(N,S),(!O||L[0]&1024)&&M!==(M=e[35].title+"")&&ot(z,M)},i(T){O||(rt(s.$$.fragment,T),O=!0)},o(T){vt(s.$$.fragment,T),O=!1},d(T){T&&o(t),Vt(s),U.d(),W=!1,ee(ut)}}}function cl(e){let t,l,s,f=e[8],c,r,u,d,_,i,m,b=e[11].t("Documents")+"",k,x,S,N,D,F='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',y,M,z,ht,P,$,it='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',tt,q,ct,nt,O,W,ut,ft,et=e[11].t("Use '#' in the prompt input to load and select your documents.")+"",U,A,R,h,E,T,L,C,Y=e[11].t("Import Documents Mapping")+"",Q,pt,Z,I='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z" clip-rule="evenodd"></path></svg>',J,K,Mt,St=e[11].t("Export Documents Mapping")+"",Ut,Nt,_t,$t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z" clip-rule="evenodd"></path></svg>',wt,Bt,Ot;oe.title=t=`
		`+e[11].t("Documents")+" | "+e[12]+`
	`;let st=e[9]&&ye(e),gt=xe(e);function At(v){e[19](v)}let qt={};e[6]!==void 0&&(qt.show=e[6]),r=new sl({props:qt}),Ft.push(()=>ae(r,"show",At));let at=e[5].length>0&&De(e),kt=Kt(e[10]),lt=[];for(let v=0;v<kt.length;v+=1)lt[v]=Te(be(e,kt,v));const ze=v=>vt(lt[v],1,1,()=>{lt[v]=null});return{c(){l=B(),st&&st.c(),s=B(),gt.c(),c=B(),Et(r.$$.fragment),d=B(),_=p("div"),i=p("div"),m=p("div"),k=X(b),x=B(),S=p("div"),N=p("div"),D=p("div"),D.innerHTML=F,y=B(),M=p("input"),ht=B(),P=p("div"),$=p("button"),$.innerHTML=it,tt=B(),q=p("hr"),ct=B(),at&&at.c(),nt=B(),O=p("div");for(let v=0;v<lt.length;v+=1)lt[v].c();W=B(),ut=p("div"),ft=X("ⓘ "),U=X(et),A=B(),R=p("div"),h=p("div"),E=p("input"),T=B(),L=p("button"),C=p("div"),Q=X(Y),pt=B(),Z=p("div"),Z.innerHTML=I,J=B(),K=p("button"),Mt=p("div"),Ut=X(St),Nt=B(),_t=p("div"),_t.innerHTML=$t,this.h()},l(v){Pe("svelte-vxyf60",oe.head).forEach(o),l=H(v),st&&st.l(v),s=H(v),gt.l(v),c=H(v),Tt(r.$$.fragment,v),d=H(v),_=g(v,"DIV",{class:!0});var yt=w(_);i=g(yt,"DIV",{class:!0});var mt=w(i);m=g(mt,"DIV",{class:!0});var Rt=w(m);k=G(Rt,b),Rt.forEach(o),mt.forEach(o),yt.forEach(o),x=H(v),S=g(v,"DIV",{class:!0});var Xt=w(S);N=g(Xt,"DIV",{class:!0});var Gt=w(N);D=g(Gt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(D)!=="svelte-v38fm1"&&(D.innerHTML=F),y=H(Gt),M=g(Gt,"INPUT",{class:!0,placeholder:!0}),Gt.forEach(o),ht=H(Xt),P=g(Xt,"DIV",{});var de=w(P);$=g(de,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt($)!=="svelte-1rxkyow"&&($.innerHTML=it),de.forEach(o),Xt.forEach(o),tt=H(v),q=g(v,"HR",{class:!0}),ct=H(v),at&&at.l(v),nt=H(v),O=g(v,"DIV",{class:!0});var he=w(O);for(let re=0;re<lt.length;re+=1)lt[re].l(he);he.forEach(o),W=H(v),ut=g(v,"DIV",{class:!0});var ne=w(ut);ft=G(ne,"ⓘ "),U=G(ne,et),ne.forEach(o),A=H(v),R=g(v,"DIV",{class:!0});var me=w(R);h=g(me,"DIV",{class:!0});var zt=w(h);E=g(zt,"INPUT",{id:!0,type:!0,accept:!0}),T=H(zt),L=g(zt,"BUTTON",{class:!0});var Jt=w(L);C=g(Jt,"DIV",{class:!0});var ve=w(C);Q=G(ve,Y),ve.forEach(o),pt=H(Jt),Z=g(Jt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(Z)!=="svelte-aqr4dt"&&(Z.innerHTML=I),Jt.forEach(o),J=H(zt),K=g(zt,"BUTTON",{class:!0});var Wt=w(K);Mt=g(Wt,"DIV",{class:!0});var pe=w(Mt);Ut=G(pe,St),pe.forEach(o),Nt=H(Wt),_t=g(Wt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(_t)!=="svelte-1n7zye"&&(_t.innerHTML=$t),Wt.forEach(o),zt.forEach(o),me.forEach(o),this.h()},h(){n(m,"class","text-lg font-semibold self-center"),n(i,"class","flex justify-between items-center"),n(_,"class","mb-3"),n(D,"class","self-center ml-1 mr-3"),n(M,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),n(M,"placeholder",z=e[11].t("Search Documents")),n(N,"class","flex flex-1"),n($,"class","px-2 py-2 rounded-xl border border-gray-200 dark:border-gray-600 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1"),n(S,"class","flex w-full space-x-2"),n(q,"class","dark:border-gray-850 my-2.5"),n(O,"class","my-3 mb-5"),n(ut,"class","text-gray-500 text-xs mt-1 mb-2"),n(E,"id","documents-import-input"),n(E,"type","file"),n(E,"accept",".json"),E.hidden=!0,n(C,"class","self-center mr-2 font-medium"),n(Z,"class","self-center"),n(L,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),n(Mt,"class","self-center mr-2 font-medium"),n(_t,"class","self-center"),n(K,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),n(h,"class","flex space-x-2"),n(R,"class","flex justify-end w-full mb-2")},m(v,V){j(v,l,V),st&&st.m(v,V),j(v,s,V),gt.m(v,V),j(v,c,V),It(r,v,V),j(v,d,V),j(v,_,V),a(_,i),a(i,m),a(m,k),j(v,x,V),j(v,S,V),a(S,N),a(N,D),a(N,y),a(N,M),jt(M,e[0]),a(S,ht),a(S,P),a(P,$),j(v,tt,V),j(v,q,V),j(v,ct,V),at&&at.m(v,V),j(v,nt,V),j(v,O,V);for(let yt=0;yt<lt.length;yt+=1)lt[yt]&&lt[yt].m(O,null);j(v,W,V),j(v,ut,V),a(ut,ft),a(ut,U),j(v,A,V),j(v,R,V),a(R,h),a(h,E),e[29](E),a(h,T),a(h,L),a(L,C),a(C,Q),a(L,pt),a(L,Z),a(h,J),a(h,K),a(K,Mt),a(Mt,Ut),a(K,Nt),a(K,_t),wt=!0,Bt||(Ot=[dt(M,"input",e[20]),dt($,"click",e[21]),dt(E,"change",e[30]),dt(E,"change",e[31]),dt(L,"click",e[32]),dt(K,"click",e[33])],Bt=!0)},p(v,V){(!wt||V[0]&6144)&&t!==(t=`
		`+v[11].t("Documents")+" | "+v[12]+`
	`)&&(oe.title=t),v[9]?st?(st.p(v,V),V[0]&512&&rt(st,1)):(st=ye(v),st.c(),rt(st,1),st.m(s.parentNode,s)):st&&(Yt(),vt(st,1,1,()=>{st=null}),Zt()),V[0]&256&&Qt(f,f=v[8])?(Yt(),vt(gt,1,1,fe),Zt(),gt=xe(v),gt.c(),rt(gt,1),gt.m(c.parentNode,c)):gt.p(v,V);const yt={};if(!u&&V[0]&64&&(u=!0,yt.show=v[6],te(()=>u=!1)),r.$set(yt),(!wt||V[0]&2048)&&b!==(b=v[11].t("Documents")+"")&&ot(k,b),(!wt||V[0]&2048&&z!==(z=v[11].t("Search Documents")))&&n(M,"placeholder",z),V[0]&1&&M.value!==v[0]&&jt(M,v[0]),v[5].length>0?at?(at.p(v,V),V[0]&32&&rt(at,1)):(at=De(v),at.c(),rt(at,1),at.m(nt.parentNode,nt)):at&&(Yt(),vt(at,1,1,()=>{at=null}),Zt()),V[0]&66944){kt=Kt(v[10]);let mt;for(mt=0;mt<kt.length;mt+=1){const Rt=be(v,kt,mt);lt[mt]?(lt[mt].p(Rt,V),rt(lt[mt],1)):(lt[mt]=Te(Rt),lt[mt].c(),rt(lt[mt],1),lt[mt].m(O,null))}for(Yt(),mt=kt.length;mt<lt.length;mt+=1)ze(mt);Zt()}(!wt||V[0]&2048)&&et!==(et=v[11].t("Use '#' in the prompt input to load and select your documents.")+"")&&ot(U,et),(!wt||V[0]&2048)&&Y!==(Y=v[11].t("Import Documents Mapping")+"")&&ot(Q,Y),(!wt||V[0]&2048)&&St!==(St=v[11].t("Export Documents Mapping")+"")&&ot(Ut,St)},i(v){if(!wt){rt(st),rt(gt),rt(r.$$.fragment,v),rt(at);for(let V=0;V<kt.length;V+=1)rt(lt[V]);wt=!0}},o(v){vt(st),vt(gt),vt(r.$$.fragment,v),vt(at),lt=lt.filter(Boolean);for(let V=0;V<lt.length;V+=1)vt(lt[V]);wt=!1},d(v){v&&(o(l),o(s),o(c),o(d),o(_),o(x),o(S),o(tt),o(q),o(ct),o(nt),o(O),o(W),o(ut),o(A),o(R)),st&&st.d(v),gt.d(v),Vt(r,v),at&&at.d(v),Ne(lt,v),e[29](null),Bt=!1,ee(Ot)}}}const ul=e=>(e==null?void 0:e.selected)==="checked",Ie=e=>(e==null?void 0:e.selected)==="checked",Ve=e=>(e==null?void 0:e.selected)==="checked",Me=e=>(e==null?void 0:e.selected)==="checked",Le=e=>(e==null?void 0:e.selected)==="checked";function fl(e,t,l){let s,f,c,r;Pt(e,bt,h=>l(2,s=h)),Pt(e,qe,h=>l(12,c=h)),Pt(e,Re,h=>l(13,r=h));const{saveAs:u}=Fe,d=ce("i18n");Pt(e,d,h=>l(11,f=h));let _="",i="",m,b=[],k=!1,x=!1,S,N="",D=!1;const F=async h=>{await we(localStorage.token,h),await bt.set(await Lt(localStorage.token))},y=async h=>{await Promise.all(h.map(async E=>await we(localStorage.token,E.name))),await bt.set(await Lt(localStorage.token))},M=async h=>{const E=await Ce(localStorage.token,"",h).catch(T=>(xt.error(T),null));E&&(await ie(localStorage.token,E.collection_name,E.filename,Ue(E.filename),E.filename).catch(T=>(xt.error(T),null)),await bt.set(await Lt(localStorage.token)))};ue(()=>{bt.subscribe(C=>{l(5,b=C.reduce((Y,Q,pt,Z)=>{var I;return[...new Set([...Y,...(((I=Q==null?void 0:Q.content)==null?void 0:I.tags)??[]).map(J=>J.name)])]},[]))});const h=document.querySelector("body"),E=C=>{C.preventDefault(),l(9,D=!0)},T=()=>{l(9,D=!1)},L=async C=>{var Y,Q;if(C.preventDefault(),(Y=C.dataTransfer)!=null&&Y.files){let pt=new FileReader;pt.onload=I=>{files=[...files,{type:"image",url:`${I.target.result}`}]};const Z=(Q=C.dataTransfer)==null?void 0:Q.files;if(Z&&Z.length>0)for(const I of Z)console.log(I,I.name.split(".").at(-1)),Be.includes(I.type)||He.includes(I.name.split(".").at(-1))||xt.error(`Unknown File Type '${I.type}', but accepting and treating as plain text`),M(I);else xt.error(f.t("File not found."))}l(9,D=!1)};return h==null||h.addEventListener("dragover",E),h==null||h.addEventListener("drop",L),h==null||h.addEventListener("dragleave",T),()=>{h==null||h.removeEventListener("dragover",E),h==null||h.removeEventListener("drop",L),h==null||h.removeEventListener("dragleave",T)}});let z;function ht(h){x=h,l(7,x)}function P(h){k=h,l(6,k)}function $(){i=this.value,l(0,i)}const it=()=>{l(6,k=!0)},tt=h=>{h.detail==="checked"?l(10,z=z.map(E=>({...E,selected:"checked"}))):h.detail==="unchecked"&&l(10,z=z.map(E=>({...E,selected:"unchecked"})))},q=async()=>{l(1,N="")},ct=async h=>{l(1,N=h)},nt=async()=>{y(z.filter(h=>h.selected==="checked"))},O=async(h,E)=>{E.stopPropagation(),l(7,x=!x),l(8,S=h)},W=(h,E)=>{E.stopPropagation(),F(h.name)},ut=(h,E,T)=>{(h==null?void 0:h.selected)==="checked"?l(10,E[T].selected="unchecked",z):l(10,E[T].selected="checked",z)};function ft(h){Ft[h?"unshift":"push"](()=>{m=h,l(4,m)})}function et(){_=this.files,l(3,_)}const U=()=>{console.log(_);const h=new FileReader;h.onload=async E=>{const T=JSON.parse(E.target.result);console.log(T);for(const L of T)await ie(localStorage.token,L.collection_name,L.filename,L.name,L.title).catch(C=>(xt.error(C),null));await bt.set(await Lt(localStorage.token))},h.readAsText(_[0])},A=()=>{m.click()},R=async()=>{let h=new Blob([JSON.stringify(s)],{type:"application/json"});u(h,`documents-mapping-export-${Date.now()}.json`)};return e.$$.update=()=>{e.$$.dirty[0]&7&&l(10,z=s.filter(h=>{var E;return(N===""||(((E=h==null?void 0:h.content)==null?void 0:E.tags)??[]).map(T=>T.name).includes(N))&&(i===""||h.name.includes(i))}))},[i,N,s,_,m,b,k,x,S,D,z,f,c,r,u,d,F,y,ht,P,$,it,tt,q,ct,nt,O,W,ut,ft,et,U,A,R]}class dl extends le{constructor(t){super(),se(this,t,fl,cl,Qt,{},null,[-1,-1])}}function hl(e){let t,l;return t=new dl({}),{c(){Et(t.$$.fragment)},l(s){Tt(t.$$.fragment,s)},m(s,f){It(t,s,f),l=!0},p:fe,i(s){l||(rt(t.$$.fragment,s),l=!0)},o(s){vt(t.$$.fragment,s),l=!1},d(s){Vt(t,s)}}}class Ml extends le{constructor(t){super(),se(this,t,null,hl,Qt,{})}}export{Ml as component};
//# sourceMappingURL=10.688d024f.js.map
