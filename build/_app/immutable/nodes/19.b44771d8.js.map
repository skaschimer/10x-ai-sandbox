{"version":3,"file":"19.b44771d8.js","sources":["../../../../../../src/routes/(app)/workspace/tools/create/+page.svelte"],"sourcesContent":["<script>\n\timport { goto } from '$app/navigation';\n\timport { createNewTool, getTools } from '$lib/apis/tools';\n\timport ToolkitEditor from '$lib/components/workspace/Tools/ToolkitEditor.svelte';\n\timport { tools } from '$lib/stores';\n\timport { onMount } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\tlet mounted = false;\n\tlet clone = false;\n\tlet tool = null;\n\n\tconst saveHandler = async (data) => {\n\t\tconsole.log(data);\n\t\tconst res = await createNewTool(localStorage.token, {\n\t\t\tid: data.id,\n\t\t\tname: data.name,\n\t\t\tmeta: data.meta,\n\t\t\tcontent: data.content\n\t\t}).catch((error) => {\n\t\t\ttoast.error(error);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success('Tool created successfully');\n\t\t\ttools.set(await getTools(localStorage.token));\n\n\t\t\tawait goto('/workspace/tools');\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (sessionStorage.tool) {\n\t\t\ttool = JSON.parse(sessionStorage.tool);\n\t\t\tsessionStorage.removeItem('tool');\n\n\t\t\tconsole.log(tool);\n\t\t\tclone = true;\n\t\t}\n\n\t\tmounted = true;\n\t});\n</script>\n\n{#if mounted}\n\t<ToolkitEditor\n\t\tid={tool?.id ?? ''}\n\t\tname={tool?.name ?? ''}\n\t\tmeta={tool?.meta ?? { description: '' }}\n\t\tcontent={tool?.content ?? ''}\n\t\t{clone}\n\t\ton:save={(e) => {\n\t\t\tsaveHandler(e.detail);\n\t\t}}\n\t/>\n{/if}\n"],"names":["_a","ctx","_b","_c","_d","dirty","toolkiteditor_changes","create_if_block","mounted","clone","tool","saveHandler","data","createNewTool","error","toast","tools","getTools","goto","onMount","$$invalidate","e"],"mappings":"iiBA+CMA,EAAAC,EAAI,CAAA,IAAJ,YAAAD,EAAM,KAAM,UACVE,EAAAD,EAAI,CAAA,IAAJ,YAAAC,EAAM,OAAQ,GACd,OAAAC,EAAAF,EAAM,CAAA,IAAN,YAAAE,EAAM,OAAU,CAAA,YAAa,EAAE,YAC5BC,EAAAH,EAAI,CAAA,IAAJ,YAAAG,EAAM,UAAW,qJAHtBJ,EAAAC,EAAI,CAAA,IAAJ,YAAAD,EAAM,KAAM,mBACVE,EAAAD,EAAI,CAAA,IAAJ,YAAAC,EAAM,OAAQ,IACdG,EAAA,IAAAC,EAAA,OAAAH,EAAAF,EAAM,CAAA,IAAN,YAAAE,EAAM,OAAU,CAAA,YAAa,EAAE,qBAC5BC,EAAAH,EAAI,CAAA,IAAJ,YAAAG,EAAM,UAAW,0IALvBH,EAAO,CAAA,GAAAM,EAAAN,CAAA,8FAAPA,EAAO,CAAA,yLArCP,IAAAO,EAAU,GACVC,EAAQ,GACRC,EAAO,KAEL,MAAAC,QAAqBC,GAAI,CAC9B,QAAQ,IAAIA,CAAI,EACE,MAAAC,EAAc,aAAa,MAAK,CACjD,GAAID,EAAK,GACT,KAAMA,EAAK,KACX,KAAMA,EAAK,KACX,QAASA,EAAK,OACZ,CAAA,EAAA,MAAOE,IACTC,EAAM,MAAMD,CAAK,EACV,SAIPC,EAAM,QAAQ,2BAA2B,EACzCC,EAAM,IAAG,MAAOC,EAAS,aAAa,KAAK,CAAA,EAErC,MAAAC,EAAK,kBAAkB,IAI/B,OAAAC,EAAO,IAAA,CACF,eAAe,OAClBC,EAAA,EAAAV,EAAO,KAAK,MAAM,eAAe,IAAI,CAAA,EACrC,eAAe,WAAW,MAAM,EAEhC,QAAQ,IAAIA,CAAI,EAChBU,EAAA,EAAAX,EAAQ,EAAI,GAGbW,EAAA,EAAAZ,EAAU,EAAI,aAWJa,GAAC,CACVV,EAAYU,EAAE,MAAM"}