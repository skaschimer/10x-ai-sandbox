import{s as te,A as W,Q as le,o as ke,F as we,G as be,H as ye,I as $e,f as b,g as y,h as g,d as i,j as u,i as A,e as ie,L as se,l as L,m as z,w as _,n as O,r as fe,a as M,c as T,u as B,v as S,p as Ee,X as De,S as Ve,y as Ie}from"./scheduler.2ec89978.js";import{S as re,i as oe,b as G,d as Q,m as X,a as C,t as H,e as J,g as Y,c as ee,f as xe}from"./index.276f3600.js";import{e as K}from"./each.de3f9353.js";import"./updater.c075227d.js";import{D as Ae,M as Ce}from"./Dropdown.9f1b9537.js";import{M as Me}from"./menu-trigger.1d870800.js";import{q as Te}from"./index.3b6ce8f7.js";import{f as He}from"./index.e8e699b3.js";import{C as Ze}from"./Checkbox.e0f2f26f.js";function ue(n,e,s){const l=n.slice();return l[10]=e[s],l}function Be(n){let e;const s=n[5].default,l=we(s,n,n[8],null);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,o){l&&l.m(t,o),e=!0},p(t,o){l&&l.p&&(!e||o&256)&&be(l,s,t,t[8],e?$e(s,t[8],o,null):ye(t[8]),null)},i(t){e||(C(l,t),e=!0)},o(t){H(l,t),e=!1},d(t){l&&l.d(t)}}}function Se(n){let e,s,l=K(n[2]),t=[];for(let r=0;r<l.length;r+=1)t[r]=de(ue(n,l,r));const o=r=>H(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ie()},l(r){for(let c=0;c<t.length;c+=1)t[c].l(r);e=ie()},m(r,c){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,c);A(r,e,c),s=!0},p(r,c){if(c&5){l=K(r[2]);let a;for(a=0;a<l.length;a+=1){const d=ue(r,l,a);t[a]?(t[a].p(d,c),C(t[a],1)):(t[a]=de(d),t[a].c(),C(t[a],1),t[a].m(e.parentNode,e))}for(Y(),a=l.length;a<t.length;a+=1)o(a);ee()}},i(r){if(!s){for(let c=0;c<l.length;c+=1)C(t[c]);s=!0}},o(r){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)H(t[c]);s=!1},d(r){r&&i(e),se(t,r)}}}function je(n){let e,s=n[3].t("No documents found")+"",l;return{c(){e=b("div"),l=L(s),this.h()},l(t){e=y(t,"DIV",{class:!0});var o=g(e);l=z(o,s),o.forEach(i),this.h()},h(){u(e,"class","text-center text-sm text-gray-500 dark:text-gray-400")},m(t,o){A(t,e,o),_(e,l)},p(t,o){o&8&&s!==(s=t[3].t("No documents found")+"")&&O(l,s)},i:fe,o:fe,d(t){t&&i(e)}}}function Le(n){let e,s,l;return{c(){e=B("svg"),s=B("path"),l=B("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=g(e);s=S(o,"path",{d:!0}),g(s).forEach(i),l=S(o,"path",{d:!0}),g(l).forEach(i),o.forEach(i),this.h()},h(){u(s,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),u(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4")},m(t,o){A(t,e,o),_(e,s),_(e,l)},d(t){t&&i(e)}}}function ze(n){let e,s,l;return{c(){e=B("svg"),s=B("path"),l=B("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=g(e);s=S(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),g(s).forEach(i),l=S(o,"path",{d:!0}),g(l).forEach(i),o.forEach(i),this.h()},h(){u(s,"fill-rule","evenodd"),u(s,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),u(s,"clip-rule","evenodd"),u(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","w-4")},m(t,o){A(t,e,o),_(e,s),_(e,l)},d(t){t&&i(e)}}}function Oe(n){var I;let e,s,l,t,o,r=(((I=n[10])==null?void 0:I.type)??"Document")+"",c,a,d,k=n[10].name+"",m,w;function f(p,V){var x;if((((x=p[10])==null?void 0:x.type)??"doc")==="doc")return ze;if(p[10].type==="collection")return Le}let v=f(n),h=v&&v(n);return{c(){e=b("div"),h&&h.c(),s=M(),l=b("div"),t=b("div"),o=b("div"),c=L(r),a=M(),d=b("div"),m=L(k),w=M(),this.h()},l(p){e=y(p,"DIV",{class:!0});var V=g(e);h&&h.l(V),V.forEach(i),s=T(p),l=y(p,"DIV",{class:!0});var x=g(l);t=y(x,"DIV",{class:!0});var $=g(t);o=y($,"DIV",{class:!0});var E=g(o);c=z(E,r),E.forEach(i),a=T($),d=y($,"DIV",{class:!0});var D=g(d);m=z(D,k),D.forEach(i),$.forEach(i),x.forEach(i),w=T(p),this.h()},h(){u(e,"class","flex self-start"),u(o,"class","w-fit text-xs font-black px-1 rounded uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200"),u(d,"class","line-clamp-1 font-medium pr-0.5"),u(t,"class","flex flex-col"),u(l,"class","flex items-center")},m(p,V){A(p,e,V),h&&h.m(e,null),A(p,s,V),A(p,l,V),_(l,t),_(t,o),_(o,c),_(t,a),_(t,d),_(d,m),A(p,w,V)},p(p,V){var x;v!==(v=f(p))&&(h&&h.d(1),h=v&&v(p),h&&(h.c(),h.m(e,null))),V&4&&r!==(r=(((x=p[10])==null?void 0:x.type)??"Document")+"")&&O(c,r),V&4&&k!==(k=p[10].name+"")&&O(m,k)},d(p){p&&(i(e),i(s),i(l),i(w)),h&&h.d()}}}function de(n){let e,s;function l(){return n[6](n[10])}return e=new Ce({props:{class:"flex gap-2.5 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Oe]},$$scope:{ctx:n}}}),e.$on("click",l),{c(){G(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,o){X(e,t,o),s=!0},p(t,o){n=t;const r={};o&260&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){H(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Ne(n){let e,s,l,t;const o=[je,Se],r=[];function c(a,d){return a[2].length===0?0:1}return s=c(n),l=r[s]=o[s](n),{c(){e=b("div"),l.c(),this.h()},l(a){e=y(a,"DIV",{class:!0});var d=g(e);l.l(d),d.forEach(i),this.h()},h(){u(e,"class","max-h-[10rem] overflow-y-scroll")},m(a,d){A(a,e,d),r[s].m(e,null),t=!0},p(a,d){let k=s;s=c(a),s===k?r[s].p(a,d):(Y(),H(r[k],1,1,()=>{r[k]=null}),ee(),l=r[s],l?l.p(a,d):(l=r[s]=o[s](a),l.c()),C(l,1),l.m(e,null))},i(a){t||(C(l),t=!0)},o(a){H(l),t=!1},d(a){a&&i(e),r[s].d()}}}function qe(n){let e,s,l;return s=new Me({props:{class:"w-full max-w-[300px]  rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"start",transition:He,$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){e=b("div"),G(s.$$.fragment),this.h()},l(t){e=y(t,"DIV",{slot:!0});var o=g(e);Q(s.$$.fragment,o),o.forEach(i),this.h()},h(){u(e,"slot","content")},m(t,o){A(t,e,o),X(s,e,null),l=!0},p(t,o){const r={};o&269&&(r.$$scope={dirty:o,ctx:t}),s.$set(r)},i(t){l||(C(s.$$.fragment,t),l=!0)},o(t){H(s.$$.fragment,t),l=!1},d(t){t&&i(e),J(s)}}}function Ke(n){let e,s;return e=new Ae({props:{$$slots:{content:[qe],default:[Be]},$$scope:{ctx:n}}}),e.$on("change",n[7]),{c(){G(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,t){X(e,l,t),s=!0},p(l,[t]){const o={};t&269&&(o.$$scope={dirty:t,ctx:l}),e.$set(o)},i(l){s||(C(e.$$.fragment,l),s=!0)},o(l){H(e.$$.fragment,l),s=!1},d(l){J(e,l)}}}function Ue(n,e,s){let l,t;W(n,Te,f=>s(9,l=f));let{$$slots:o={},$$scope:r}=e;const c=le("i18n");W(n,c,f=>s(3,t=f));let{onClose:a=()=>{}}=e,{knowledge:d=[]}=e,k=[];ke(()=>{let f=[...l.length>0?[{name:"All Documents",type:"collection",title:t.t("All Documents"),collection_names:l.map(v=>v.collection_name)}]:[],...l.reduce((v,h,I,p)=>{var V;return[...new Set([...v,...(((V=h==null?void 0:h.content)==null?void 0:V.tags)??[]).map(x=>x.name)])]},[]).map(v=>({name:v,type:"collection",collection_names:l.filter(h=>{var I;return(((I=h==null?void 0:h.content)==null?void 0:I.tags)??[]).map(p=>p.name).includes(v)}).map(h=>h.collection_name)}))];s(2,k=[...f,...l])});const m=f=>{d.find(v=>v.name===f.name)||s(0,d=[...d,{...f,type:(f==null?void 0:f.type)??"doc"}])},w=f=>{f.detail===!1&&a()};return n.$$set=f=>{"onClose"in f&&s(1,a=f.onClose),"knowledge"in f&&s(0,d=f.knowledge),"$$scope"in f&&s(8,r=f.$$scope)},[d,a,k,t,c,o,m,w,r]}class Fe extends re{constructor(e){super(),oe(this,e,Ue,Ke,te,{onClose:1,knowledge:0})}}function he(n,e,s){const l=n.slice();return l[5]=e[s],l[7]=s,l}function _e(n){let e,s=K(n[0]),l=[];for(let t=0;t<s.length;t+=1)l[t]=ve(he(n,s,t));return{c(){e=b("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=y(t,"DIV",{class:!0});var o=g(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(i),this.h()},h(){u(e,"class","flex items-center gap-2 mt-2")},m(t,o){A(t,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(t,o){if(o&3){s=K(t[0]);let r;for(r=0;r<s.length;r+=1){const c=he(t,s,r);l[r]?l[r].p(c,o):(l[r]=ve(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},d(t){t&&i(e),se(l,t)}}}function Ge(n){let e,s,l;return{c(){e=B("svg"),s=B("path"),l=B("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=g(e);s=S(o,"path",{d:!0}),g(s).forEach(i),l=S(o,"path",{d:!0}),g(l).forEach(i),o.forEach(i),this.h()},h(){u(s,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),u(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-6")},m(t,o){A(t,e,o),_(e,s),_(e,l)},d(t){t&&i(e)}}}function Qe(n){let e,s,l;return{c(){e=B("svg"),s=B("path"),l=B("path"),this.h()},l(t){e=S(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=g(e);s=S(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),g(s).forEach(i),l=S(o,"path",{d:!0}),g(l).forEach(i),o.forEach(i),this.h()},h(){u(s,"fill-rule","evenodd"),u(s,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),u(s,"clip-rule","evenodd"),u(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-6")},m(t,o){A(t,e,o),_(e,s),_(e,l)},d(t){t&&i(e)}}}function ve(n){var U,q;let e,s,l,t,o,r,c=(((U=n[5])==null?void 0:U.title)??`#${n[5].name}`)+"",a,d,k,m=n[1].t(((q=n[5])==null?void 0:q.type)??"Document")+"",w,f,v,h,I='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',p,V,x;function $(Z,j){var N;if((((N=Z[5])==null?void 0:N.type)??"doc")==="doc")return Qe;if(Z[5].type==="collection")return Ge}let E=$(n),D=E&&E(n);function P(){return n[3](n[7])}return{c(){e=b("div"),s=b("div"),l=b("div"),D&&D.c(),t=M(),o=b("div"),r=b("div"),a=L(c),d=M(),k=b("div"),w=L(m),f=M(),v=b("div"),h=b("button"),h.innerHTML=I,p=M(),this.h()},l(Z){e=y(Z,"DIV",{class:!0});var j=g(e);s=y(j,"DIV",{class:!0});var N=g(s);l=y(N,"DIV",{class:!0});var F=g(l);D&&D.l(F),F.forEach(i),t=T(N),o=y(N,"DIV",{class:!0});var R=g(o);r=y(R,"DIV",{class:!0});var ne=g(r);a=z(ne,c),ne.forEach(i),d=T(R),k=y(R,"DIV",{class:!0});var ae=g(k);w=z(ae,m),ae.forEach(i),R.forEach(i),N.forEach(i),f=T(j),v=y(j,"DIV",{class:!0});var ce=g(v);h=y(ce,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Ve(h)!=="svelte-v6mhqq"&&(h.innerHTML=I),ce.forEach(i),p=T(j),j.forEach(i),this.h()},h(){u(l,"class","p-2.5 bg-red-400 text-white rounded-lg"),u(r,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),u(k,"class","text-gray-500 text-sm"),u(o,"class","flex flex-col justify-center -space-y-0.5"),u(s,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none"),u(h,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),u(h,"type","button"),u(v,"class","absolute -top-1 -right-1"),u(e,"class","relative group")},m(Z,j){A(Z,e,j),_(e,s),_(s,l),D&&D.m(l,null),_(s,t),_(s,o),_(o,r),_(r,a),_(o,d),_(o,k),_(k,w),_(e,f),_(e,v),_(v,h),_(e,p),V||(x=Ie(h,"click",P),V=!0)},p(Z,j){var N,F;n=Z,E!==(E=$(n))&&(D&&D.d(1),D=E&&E(n),D&&(D.c(),D.m(l,null))),j&1&&c!==(c=(((N=n[5])==null?void 0:N.title)??`#${n[5].name}`)+"")&&O(a,c),j&3&&m!==(m=n[1].t(((F=n[5])==null?void 0:F.type)??"Document")+"")&&O(w,m)},d(Z){Z&&i(e),D&&D.d(),V=!1,x()}}}function Xe(n){let e,s=n[1].t("Select Documents")+"",l;return{c(){e=b("button"),l=L(s),this.h()},l(t){e=y(t,"BUTTON",{class:!0,type:!0});var o=g(e);l=z(o,s),o.forEach(i),this.h()},h(){u(e,"class","px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl"),u(e,"type","button")},m(t,o){A(t,e,o),_(e,l)},p(t,o){o&2&&s!==(s=t[1].t("Select Documents")+"")&&O(l,s)},d(t){t&&i(e)}}}function Je(n){let e,s,l,t=n[1].t("Knowledge")+"",o,r,c,a=n[1].t('To add documents here, upload them to the "Documents" workspace first.')+"",d,k,m,w,f,v,h,I,p=n[0].length>0&&_e(n);function V($){n[4]($)}let x={$$slots:{default:[Xe]},$$scope:{ctx:n}};return n[0]!==void 0&&(x.knowledge=n[0]),v=new Fe({props:x}),Ee.push(()=>xe(v,"knowledge",V)),{c(){e=b("div"),s=b("div"),l=b("div"),o=L(t),r=M(),c=b("div"),d=L(a),k=M(),m=b("div"),p&&p.c(),w=M(),f=b("div"),G(v.$$.fragment),this.h()},l($){e=y($,"DIV",{});var E=g(e);s=y(E,"DIV",{class:!0});var D=g(s);l=y(D,"DIV",{class:!0});var P=g(l);o=z(P,t),P.forEach(i),D.forEach(i),r=T(E),c=y(E,"DIV",{class:!0});var U=g(c);d=z(U,a),U.forEach(i),k=T(E),m=y(E,"DIV",{class:!0});var q=g(m);p&&p.l(q),w=T(q),f=y(q,"DIV",{class:!0});var Z=g(f);Q(v.$$.fragment,Z),Z.forEach(i),q.forEach(i),E.forEach(i),this.h()},h(){u(l,"class","self-center text-sm font-semibold"),u(s,"class","flex w-full justify-between mb-1"),u(c,"class","text-xs dark:text-gray-500"),u(f,"class","flex flex-wrap text-sm font-medium gap-1.5 mt-2"),u(m,"class","flex flex-col")},m($,E){A($,e,E),_(e,s),_(s,l),_(l,o),_(e,r),_(e,c),_(c,d),_(e,k),_(e,m),p&&p.m(m,null),_(m,w),_(m,f),X(v,f,null),I=!0},p($,[E]){(!I||E&2)&&t!==(t=$[1].t("Knowledge")+"")&&O(o,t),(!I||E&2)&&a!==(a=$[1].t('To add documents here, upload them to the "Documents" workspace first.')+"")&&O(d,a),$[0].length>0?p?p.p($,E):(p=_e($),p.c(),p.m(m,w)):p&&(p.d(1),p=null);const D={};E&258&&(D.$$scope={dirty:E,ctx:$}),!h&&E&1&&(h=!0,D.knowledge=$[0],De(()=>h=!1)),v.$set(D)},i($){I||(C(v.$$.fragment,$),I=!0)},o($){H(v.$$.fragment,$),I=!1},d($){$&&i(e),p&&p.d(),J(v)}}}function Pe(n,e,s){let l,{knowledge:t=[]}=e;const o=le("i18n");W(n,o,a=>s(1,l=a));const r=a=>{t.splice(a,1),s(0,t)};function c(a){t=a,s(0,t)}return n.$$set=a=>{"knowledge"in a&&s(0,t=a.knowledge)},[t,l,o,r,c]}class ct extends re{constructor(e){super(),oe(this,e,Pe,Je,te,{knowledge:0})}}function me(n,e,s){const l=n.slice();return l[6]=e[s],l[8]=s,l}function pe(n){let e,s,l=K(Object.keys(n[2])),t=[];for(let r=0;r<l.length;r+=1)t[r]=ge(me(n,l,r));const o=r=>H(t[r],1,1,()=>{t[r]=null});return{c(){e=b("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var c=g(e);for(let a=0;a<t.length;a+=1)t[a].l(c);c.forEach(i),this.h()},h(){u(e,"class","flex items-center gap-2 mt-2")},m(r,c){A(r,e,c);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);s=!0},p(r,c){if(c&5){l=K(Object.keys(r[2]));let a;for(a=0;a<l.length;a+=1){const d=me(r,l,a);t[a]?(t[a].p(d,c),C(t[a],1)):(t[a]=ge(d),t[a].c(),C(t[a],1),t[a].m(e,null))}for(Y(),a=l.length;a<t.length;a+=1)o(a);ee()}},i(r){if(!s){for(let c=0;c<l.length;c+=1)C(t[c]);s=!0}},o(r){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)H(t[c]);s=!1},d(r){r&&i(e),se(t,r)}}}function ge(n){let e,s,l,t,o,r=n[2][n[6]].name+"",c,a,d;function k(...m){return n[5](n[6],...m)}return l=new Ze({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),l.$on("change",k),{c(){e=b("div"),s=b("div"),G(l.$$.fragment),t=M(),o=b("div"),c=L(r),a=M(),this.h()},l(m){e=y(m,"DIV",{class:!0});var w=g(e);s=y(w,"DIV",{class:!0});var f=g(s);Q(l.$$.fragment,f),f.forEach(i),t=T(w),o=y(w,"DIV",{class:!0});var v=g(o);c=z(v,r),v.forEach(i),a=T(w),w.forEach(i),this.h()},h(){u(s,"class","self-center flex items-center"),u(o,"class","py-0.5 text-sm w-full capitalize font-medium"),u(e,"class","flex items-center gap-2")},m(m,w){A(m,e,w),_(e,s),X(l,s,null),_(e,t),_(e,o),_(o,c),_(e,a),d=!0},p(m,w){n=m;const f={};w&4&&(f.state=n[2][n[6]].selected?"checked":"unchecked"),l.$set(f),(!d||w&4)&&r!==(r=n[2][n[6]].name+"")&&O(c,r)},i(m){d||(C(l.$$.fragment,m),d=!0)},o(m){H(l.$$.fragment,m),d=!1},d(m){m&&i(e),J(l)}}}function Re(n){let e,s,l,t=n[3].t("Tools")+"",o,r,c,a=n[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"",d,k,m,w,f=n[1].length>0&&pe(n);return{c(){e=b("div"),s=b("div"),l=b("div"),o=L(t),r=M(),c=b("div"),d=L(a),k=M(),m=b("div"),f&&f.c(),this.h()},l(v){e=y(v,"DIV",{});var h=g(e);s=y(h,"DIV",{class:!0});var I=g(s);l=y(I,"DIV",{class:!0});var p=g(l);o=z(p,t),p.forEach(i),I.forEach(i),r=T(h),c=y(h,"DIV",{class:!0});var V=g(c);d=z(V,a),V.forEach(i),k=T(h),m=y(h,"DIV",{class:!0});var x=g(m);f&&f.l(x),x.forEach(i),h.forEach(i),this.h()},h(){u(l,"class","self-center text-sm font-semibold"),u(s,"class","flex w-full justify-between mb-1"),u(c,"class","text-xs dark:text-gray-500"),u(m,"class","flex flex-col")},m(v,h){A(v,e,h),_(e,s),_(s,l),_(l,o),_(e,r),_(e,c),_(c,d),_(e,k),_(e,m),f&&f.m(m,null),w=!0},p(v,[h]){(!w||h&8)&&t!==(t=v[3].t("Tools")+"")&&O(o,t),(!w||h&8)&&a!==(a=v[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"")&&O(d,a),v[1].length>0?f?(f.p(v,h),h&2&&C(f,1)):(f=pe(v),f.c(),C(f,1),f.m(m,null)):f&&(Y(),H(f,1,1,()=>{f=null}),ee())},i(v){w||(C(f),w=!0)},o(v){H(f),w=!1},d(v){v&&i(e),f&&f.d()}}}function We(n,e,s){let l,{tools:t=[]}=e,o={},{selectedToolIds:r=[]}=e;const c=le("i18n");W(n,c,d=>s(3,l=d)),ke(()=>{s(2,o=t.reduce((d,k)=>(d[k.id]={...k,selected:r.includes(k.id)},d),{}))});const a=(d,k)=>{s(2,o[d].selected=k.detail==="checked",o),s(0,r=Object.keys(o).filter(m=>o[m].selected))};return n.$$set=d=>{"tools"in d&&s(1,t=d.tools),"selectedToolIds"in d&&s(0,r=d.selectedToolIds)},[r,t,o,l,c,a]}class it extends re{constructor(e){super(),oe(this,e,We,Re,te,{tools:1,selectedToolIds:0})}}export{ct as K,it as T};
//# sourceMappingURL=ToolsSelector.91d3d1bd.js.map
